<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CleverTap Integration</title>

  <!-- CleverTap Web SDK Setup -->
  <script type="text/javascript">
    var clevertap = {
      event: [],
      profile: [],
      account: [],
      onUserLogin: [],
      notifications: [],
      privacy: [],
      spa: true // Enable if using Single Page App
    };

    // Set your CleverTap Account ID and Region
    clevertap.account.push({ "id": "75W-964-547Z" }, "eu1");

    // Privacy configurations
    clevertap.privacy.push({ optOut: false }); // Set to true if user opts out
    clevertap.privacy.push({ useIP: false });  // Set to true to collect IP

    // Load the CleverTap script
    (function () {
      var wzrk = document.createElement('script');
      wzrk.type = 'text/javascript';
      wzrk.async = true;
      wzrk.src = ('https:' === document.location.protocol ?
        'https://d2r1yp2w7bby2u.cloudfront.net' :
        'http://static.clevertap.com') + '/js/clevertap.min.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(wzrk, s);
    })();
  </script>
</head>

<body>
  <h1>Welcome to My CleverTap Demo Page</h1>
  <button onclick="loginUser()">Login User</button>
  <button onclick="trackEvent()">Track Product View</button>
  <button onclick="askNotificationPermission()">Enable Web Push</button>

  <script>
    // Simulate user login
    function loginUser() {
      clevertap.onUserLogin.push({
        "Site": {
          "Name": "John Doe",
          "Identity": "user_12345",
          "Email": "john@example.com",
          "Phone": "+14155551234",
          "Gender": "M",
          "DOB": new Date("1990-01-01"),
          "MSG-email": true,
          "MSG-push": true,
          "MSG-sms": true,
          "MSG-whatsapp": false
        }
      });

      alert("User logged in and identified.");
    }

    // Track an event
    function trackEvent() {
      clevertap.event.push("Product Viewed", {
        "Product name": "Casio Chronograph Watch",
        "Category": "Mens Accessories",
        "Price": 59.99,
        "Date": new Date()
      });

      alert("Product Viewed event sent.");
    }

    // Ask for push notification permission
    function askNotificationPermission() {
      clevertap.notifications.push({
        "titleText": "Would you like to receive Push Notifications?",
        "bodyText": "We promise to only send you relevant content.",
        "okButtonText": "Yes, Notify Me!",
        "rejectButtonText": "No, Thanks",
        "okButtonColor": "#F28046",
        "askAgainTimeInSeconds": 5,
        "serviceWorkerPath": "clevertap_sw.js",
        "vapidKey": "BH-2CEh29Jqfgsca8NQLT_qvGTvIFJXhW2WovBFwd5mLSusJ-cRTVjdapTd36YV3cBZKwxmd1kFYzOfV5cphNGA"
      });
    }
  </script>
</body>
</html>
